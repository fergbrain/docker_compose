version: "2.2"
services:
  # https://github.com/linuxserver/docker-overseerr
  overseerr:
    image: lscr.io/linuxserver/overseerr
    container_name: overseerr
    environment:
      - PGID=113
      - PUID=106
      - TZ=America/Los_Angeles
    volumes:
      -  overseerr:/config
    ports:
      - 5055:5055
    restart: unless-stopped
  # https://github.com/haugene/docker-transmission-openvpn

  #transmission:
  #  # NOTE: change tag to dev-arm64 instead of dev when using Raspberry Pi
  #  image: haugene/transmission-openvpn:dev
  #  container_name: transmission-openvpn
  #  restart: always
  #  ports:
  #    - "9091:9091"
  #  environment:
  #    - CREATE_TUN_DEVICE=true
  #    - OPENVPN_PROVIDER=<FILL>
  #    - OPENVPN_CONFIG=<FILL>
  #    - OPENVPN_USERNAME=<FILL>
  #    - OPENVPN_PASSWORD=<FILL>
  #    - WEBPROXY_ENABLED=false
  #  volumes:
  #    - /media/downloads:/data
  #    - /etc/localtime:/etc/localtime:ro
  # https://github.com/linuxserver/docker-radarr
  radarr:
    image: linuxserver/radarr:3.2.2.5080-ls128
    container_name: radarr
    restart: always
    ports:
      - "7878:7878"
    environment:
      - PGID=113
      - PUID=106
      - TZ=America/Los_Angeles
    volumes:
      - radarr:/config
      - movies:/movies
      - downloads_completed:/downloads

  # https://github.com/linuxserver/docker-sonarr
  sonarr:
    image: linuxserver/sonarr:3.0.6.1342-ls132
    container_name: sonarr
    restart: always
    ports:
      - "8989:8989"
    environment:
      - PGID=113
      - PUID=106
      - TZ=America/Los_Angeles
    volumes:
      - sonarr:/config
      - tv:/tv
      - downloads_completed:/downloads

  # https://github.com/linuxserver/docker-jackett
  jackett:
    image: linuxserver/jackett:v0.20.422-ls55
    container_name: jackett
    restart: always
    ports:
      - "9117:9117"
    environment:
      - PGID=113
      - PUID=106
      - TZ=America/Los_Angeles
    volumes:
      - jackett:/config
      - downloads_watch:/downloads  # transmission watch directory

volumes:
  movies:
    name: movies
    driver_opts:
      type: "nfs"
      o: "addr=jupiter.ferg.ferguson.pw,nolock,soft,rw"
      device: ":/srv/media/movies"
  tv:
    name: tv
    driver_opts:
      type: "nfs"
      o: "addr=jupiter.ferg.ferguson.pw,nolock,soft,rw"
      device: ":/srv/media/tv"
  downloads_completed:
    name: downloads_completed
    driver_opts:
      type: "nfs"
      o: "addr=jupiter.ferg.ferguson.pw,nolock,soft,rw"
      device: ":/srv/media/downloads/completed"
  downloads_watch:
    name: downloads_watch
    driver_opts:
      type: "nfs"
      o: "addr=jupiter.ferg.ferguson.pw,nolock,soft,rw"
      device: ":/srv/media/downloads/watch"
  overseerr:
    name: overseerr
    driver_opts:
      type: "nfs"
      o: "addr=jupiter.ferg.ferguson.pw,nolock,soft,rw"
      device: ":/srv/media/overseerr"
  radarr:
    name: radarr
    driver_opts:
      type: "nfs"
      o: "addr=jupiter.ferg.ferguson.pw,nolock,soft,rw"
      device: ":/srv/media/radarr"
  sonarr:
    name: sonarr
    driver_opts:
      type: "nfs"
      o: "addr=jupiter.ferg.ferguson.pw,nolock,soft,rw"
      device: ":/srv/media/sonarr"
  jackett:
    name: jackett
    driver_opts:
      type: "nfs"
      o: "addr=jupiter.ferg.ferguson.pw,nolock,soft,rw"
      device: ":/srv/media/jackett"
